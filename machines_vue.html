<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="UTF-8" />
	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
	<link rel="stylesheet" href="./css/style.css">
	<script type="text/javascript" src="./js/requete.js"></script>
	<script type="text/javascript" src="./js/reseau.js"></script>
	<script type="text/javascript">

		function searchIP(){
		console.log("searchIP");
		var requete= creerRequete();
		var arg=document.getElementById("ip").value;
		var url="http://nailyk.ddns.net:54823/machine?ip="+arg ;
		requete.open("POST", url, true);
		requete.onreadystatechange=function(){
			afficherResultat(requete);
		}

		requete.send();
		}

		function searchListMachine(){
			Machine.effacerMachine(); // n'affiche plus l'icone machine quand on affiche la liste
		console.log("searchListMachine");
		var requete= creerRequete();
		var url="http://nailyk.ddns.net:54823/listmachine" ;
		requete.open("POST", url, true);
		requete.onreadystatechange=function(){
			afficherResultat(requete);
		}

		requete.send();
		}


	 function afficherResultat(requete){
	 	console.log("afficherResultat");
	 		console.log("afficherResultat");
		if(requete.readyState==4 && requete.status==200){
			console.log("afficherIIIFFFF");
			elem=document.getElementById("texte");
			console.log("RESP: "+requete.responseText);
			elem.innerHTML=requete.responseText;
		}
	}
	function both(){
		console.log("BOOOOOOTHHHHHHHHHH");
		Machine.afficherMachine();
		searchIP();
	}

	</script>

		<title>AdminEasy</title>
	</head>
	<body>  <!-- onload="Machine.afficherMachine()" -->
		<header id="titre_principal">	
		<h1>AdminEasy</h1>	
		</header>
		<!-- .....................................MENU........................................... -->
		<nav>  <!-- lien de navigation -->
			<ul>    <!-- accueil -->
				<li><a href="index.html">Accueil</a></li>	
				<li><a href="reseau_vue.html">Réseau</a>			
				</li>	
				<li class="selected"><a href="machines_vue.html">Machines</a>
				</li>
				<li><a href="contact_vue.html">Contact</a></li>	
			</ul>
		</nav>
		<!-- ................................................................................ -->
		<div id="bloc_page">
			<div class="machines">
				<h4>
					Les machines du réseau:
				</h4>
				<div id="texte"></div>
				<i id="machine" class="material-icons" style="font-size:60px;float:right;position: absolute; display: none;">laptop</i>
				<form id="monform">
					<br/>
					<p>
						<label>Cliquez ici pour voir la liste des machines présentes dans le rédeau </label>
						<input name="rechercher" type="button" value="Liste"  onclick="searchListMachine()"/>
					</p>
					<br/>
					<p>
						<label>Entrez une adresse ip : </label>
						<input id="ip" type="text" name="ipmachine" placeholder="Ex : 192.168.1.42" />
						<input name="ipmachine" type="button" value="Envoyer" onclick="/*window.open('caract_vue.html')*/Machine.afficherMachine();searchIP();"/>
					</p>
				</form>
			</div>
		</div>

<!-- ........................................... PIED DE PAGE ..................................... -->
		<footer>  
			<p class="gauchepdp">
				MACK - Da Costa, Dujardin, Trugeon, Bohl
			</p>
			<p class="droitepdp">
				<a href="contact_vue.html">Contact</a>
			</p>
			
			<p>
				Projet dans le cadre du DUT informatique - IUT Fontainebleau - 2017/2018
			</p>
			<div style="clear : both"></div>
		</footer>
	</body>
</html>