<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="UTF-8" />
	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
	<link rel="stylesheet" href="./css/style.css">
	<script type="text/javascript" src="./js/requete.js"></script>
	<script src="./js/accueil.js"></script>
	<script src="../../serveurs_node/serveur.js"></script>

	<script type="text/javascript">
/*
	function search(){
	
		//element=document.getElementById("modele").value;
		//	console.log("search: "+element);
		var requete= creerRequete();
		var url="accueil.php";

		requete.open("POST", url, true);
		requete.onreadystatechange=function(){
			afficherResultat(requete);
		}

	//	requete.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");

		requete.send();
	}

	 function afficherResultat(requete){
	 		console.log("afficherResultat");
		if(requete.readyState==4 && requete.status==200){
			console.log("afficherIIIFFFF");
			elem=document.getElementById("test");
				console.log("RESP: "+requete.responseText);
			elem.innerHTML=requete.responseText;
		}
	}
	*/

	function search(){
		var pg = require('/home/invite/js_node/node_modules/pg') ;
var conString = "postres://admineasy_client:1337@10.8.0.1:5432/admineasy" ;

var client = new pg.Client(conString) ;
client.connect() ;

var query = client.query("select * from machines") ;

var list;

query.on('row', function(row)
	{
		list = row ;
	}) ;
query.on('end', function(end)
	{
		client.end() ;
	}) ;




var http = require("http");
http.createServer(function(request,response)
{
  response.writeHead(200, {"Content-Type": "text/plain"});

  console.log(list);

  response.end("name : "+list.name+" os-simple : "+list.os_simple+" cpu-name : "+list.cpu_name);
  console.log(list.name);
  console.log(list.os_simple);
  console.log(list.cpu_name);
}).listen(8080,'192.168.1.21');
console.log("Server Running at http://192.168.1.21:8080/");
	}

	</script>

		<title>AdminEasy</title>
	</head>
	<body onload="Accueil.afficherAlerte()">
		<header id="titre_principal">	
		<h1>AdminEasy</h1>	
		</header>
		<!-- .....................................MENU........................................... -->
	<nav>  <!-- lien de navigation -->
			<ul>    <!-- accueil -->
				<li class="menuaccueil"><a href="index.html">Accueil</a></li>	
				<li class="menureseau"><a href="reseau_vue.html">RÃ©seau</a>			
				</li>	
				<li class="menumachines"><a href="machines_vue.html">Machines</a>
				</li>
				<li class="contact"><a href="contact_vue.html">Contact</a></li>	
			</ul>
		</nav>
		<!-- ................................................................................ -->
		
		<div id="accueil">
			<i id="alerte" class="material-icons" style="font-size:48px;color:red">warning</i>
				
		</div>

		<div id="test">
		<form id="monform">
				CPU_Modele
				<input id="modele" type="text"/>
				<input name="rechercher" type="button" value="Envoyer"  onclick="search()"/>
			</form>
		</div>
		<div id="texte"></div>

<!-- ........................................... PIED DE PAGE ..................................... -->
		<footer>  
			<p class="gauchepdp">
				MACK - Da Costa, Dujardin, Trugeon, Bohl
			</p>
			<p class="droitepdp">
				<a href="contact_vue.html">Contact</a>
			</p>
			
			<p>
				Projet dans le cadre du DUT informatique - IUT Fontainebleau - 2017/2018
			</p>
			<div style="clear : both"></div>
		</footer>
	</body>
</html>
